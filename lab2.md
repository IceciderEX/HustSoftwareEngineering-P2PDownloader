### Lab1 Tracker通信

#### 1.1 实验目的

    通过该实验了解和掌握与Http Tracker服务器通信的协议

#### 1.2 实验环境

* 语言工具: 基于Python语言实现
* 操作系统: Windows

#### 1.3 实验要求

    根据lab2.md文档和完成src/torrent/tracker.py框架代码,通过test/test_tracker.py的测试

#### 2.1 Http Tracker 通信协议
    Tracker是一种响应HTTP GET请求的HTTP服务。请求包括来自客户端的信息，这些信息可帮助跟踪器保留有关种子的总体统计信息。响应包括一个对等列表，可帮助客户端参与种子下载。基本 URL 由元信息 （.torrent） 文件中定义的“ URL”组成。然后将参数添加到此 URL（即在URL 之后使用“？”，后跟由“&”分隔的“param=value”序列）

#### 2.2 Tracker 请求参数
    Get请求参数如下:

* info_hash:来自torrent.info的 urlencoding 20 字节 SHA1 哈希。请注意，给定上述信息键的定义，该值将是一个经过编码的字典。
* peer_id:urlen编码的 20 字节字符串，用作客户端的唯一 ID，由客户端在启动时生成。这允许是任何值，也可以是二进制数据。
* port:客户端正在侦听的端口号。为BitTorrent保留的端口通常是6881-6889。如果客户端无法在此范围内建立端口，则可以选择放弃。
* uploaded:上传的总数量（自客户端向跟踪器发送“已启动”事件以来）
* downloaded:下载总量（自客户端向跟踪器发送“已启动”事件以来）
* left:此客户端仍要下载的字节数
* compact: 将其设置为 1 表示客户端接受紧凑响应。对等方列表替换为每个对等方 6 个字节的对等方字符串。前四个字节是主机（按网络字节顺序），后两个字节是端口（同样按网络字节顺序）。应该注意的是，一些跟踪器只支持紧凑响应（为了节省带宽），要么拒绝没有“compact=1”的请求，要么只是发送紧凑响应，除非请求包含“compact=0”（在这种情况下，它们将拒绝请求）。
* event:如果指定，则必须为已开始、已完成、已停止（或空，与未指定相同）之一。如果未指定，则此请求是定期执行的请求。
  * started: 对跟踪器的第一个请求必须包含具有此值的事件键。
  * stopped: 如果客户端正常关闭，则必须发送到跟踪器。
  * completed: 下载完成后必须发送到跟踪器。但是，如果客户端启动时下载已 100% 完成，则不得发送。、

#### 2.3 Tracker 响应报文
    Tracker服务器收到正确的请求后回传的响应报文格式如下:
* failure reason: 如果存在，则可能不存在其他的报文。
* interval: 客户端在向跟踪器发送常规请求之间应等待的时间间隔（以秒为单位）
* tracker id:客户端应在下次公告时发回的字符串。如果不存在，并且之前的公告发送了跟踪器 ID，请不要丢弃旧值;继续使用它。
* complete:具有整个文件的对等体数
* incomplete:具有不完整文件的对等体的数量
* peers:peers 值可以是由 6 个字节的倍数组成的字符串。前 4 个字节是 IP 地址，后 2 个字节是端口号。全网络（大端序）表示法。


#### 3.1 任务框架

    参见 src/torrent/tracker.py



